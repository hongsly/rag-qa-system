# Generated by Claude Code
"""
Script to print different retrieval results for 3 general queries
"""
from pathlib import Path
from src.hybrid_search import HybridRetriever


def show_all_results():
    project_root = Path(__file__).parent.parent
    data_dir = project_root / "data" / "processed"
    retriever = HybridRetriever()

    print("Loading index and chunks...", end=" ")
    retriever.load_from_file(data_dir / "rag_index.faiss", data_dir / "chunks.jsonl")
    print("done\n")

    test_queries = [
        "What is attention mechanism in transformers?",
        "How does BERT pretraining work?",
        "What is the difference between GPT and BERT?"
    ]

    for q_idx, query in enumerate(test_queries, 1):
        print("=" * 100)
        print(f"QUERY {q_idx}: {query}")
        print("=" * 100)

        dense_results = retriever.search_dense(query, 5)
        sparse_results = retriever.search_sparse(query, 5)
        hybrid_results = retriever.search_hybrid(query, 5)

        # Dense
        print("\n" + "-" * 100)
        print("DENSE (FAISS) - Top 5:")
        print("-" * 100)
        for i, chunk in enumerate(dense_results, 1):
            print(f"\n{i}. Chunk ID: {chunk['chunk_id']}")
            print(f"   Content: {chunk['chunk_text'][:300]}...")

        # Sparse
        print("\n" + "-" * 100)
        print("SPARSE (BM25) - Top 5:")
        print("-" * 100)
        for i, chunk in enumerate(sparse_results, 1):
            print(f"\n{i}. Chunk ID: {chunk['chunk_id']}")
            print(f"   Content: {chunk['chunk_text'][:300]}...")

        # Hybrid
        print("\n" + "-" * 100)
        print("HYBRID (RRF) - Top 5:")
        print("-" * 100)
        for i, chunk in enumerate(hybrid_results, 1):
            print(f"\n{i}. Chunk ID: {chunk['chunk_id']}")
            print(f"   Content: {chunk['chunk_text'][:300]}...")

        print("\n")


if __name__ == "__main__":
    show_all_results()
